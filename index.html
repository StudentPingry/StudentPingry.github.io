<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Request Form</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #0a192f;
        color: #fff;
    }
    .container {
        width: 400px;
        margin: 50px auto;
        padding: 20px;
        background-color: #0a192f;
        color: #fff;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
    }
    h1 {
        text-align: center;
        margin-bottom: 20px;
    }
    form {
        margin-top: 20px;
    }
    label {
        display: block;
        margin-bottom: 5px;
    }
    input, select, textarea, button {
        width: 100%;
        margin-top: 5px;
        padding: 10px;
        border-radius: 5px;
        border: none;
        background-color: #172a45;
        color: #fff;
    }
    button {
        background-color: #007bff;
        cursor: pointer;
    }
</style>
</head>
<body>
<div class="container">
    <img src="image.png" alt="Logo" style="width: 50px; height: 50px; margin-bottom: 20px;">
    <h1>Submit Request</h1>
    <form id="requestForm">
        <label for="studentName">Student Name</label>
        <input type="text" id="studentName" required>
        
        <label for="requestType">Request Type</label>
        <select id="requestType" required>
            <option value="">Select...</option>
            <option value="Library Access">School Related</option>
            <option value="Technical Support">Technical Support</option>
            <option value="Other">Other</option>
        </select>
        
        <label for="requestDetails">Request Details</label>
        <textarea id="requestDetails" rows="4" required></textarea>
        
        <button type="submit" onclick="submit();">Submit Request</button>
        <div id="status"></div>
    </form>
</div>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
    (function(){
        emailjs.init("qt1kTxQxMJ5q4ctR3");
    })();
    
    function submit(){
        console.log(e);
        const studentName = document.getElementById('studentName').value;
        const requestType = document.getElementById('requestType').value;
        const requestDetails = document.getElementById('requestDetails').value;
        var status = document.getElementById("status");
        status.innerText = "Sending"...;
        
        if studentName != '' || requestType != '' || requestDetails != '':
            alert("You must fill out all fields!");
        
        emailjs.send("service_9ighjf4", "template_ehanmxc", {
            student_name: studentName,
            request_type: requestType,
            request_details: requestDetails,
            to: "johnpingry1@gmail.com"
        }).then(function(response) {
            alert('Request submitted successfully!');
            console.log("successful");
            document.getElementById('requestForm').reset();
            status = document.getElementById('status')
            status.innerText = 'Success!';
        },function(success) {
            console.log('yay');
            alert("yay");
            status = document.getElementById('status')
            status.innerText = 'Success!';
        },function(error) {
            console.error('Failed to submit request:', error);
            status = document.getElementById('status')
            status.innerText = 'Something went wrong. Please try again later.';
            alert('Failed to submit request. Please try again.');
        });

        console.log("finished sending, hopefully worked, check email");
    };
</script>
</body>
</html>
